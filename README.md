# 1co18 - Ghanaian Worship Lyrics

A minimal web app for finding and copying Ghanaian worship lyrics for church projection software.

![1co18](https://img.shields.io/badge/Next.js-16-black) ![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-3ECF8E) ![License](https://img.shields.io/badge/License-MIT-blue)

## Features

- ğŸ” **Smart Search** - Fuzzy search that handles Twi characters (É›â†’e, É”â†’o, Å‹â†’n)
- ğŸ“‹ **Copy for Projection** - One-click copy formatted for FreeShow/EasyWorship
- ğŸ“ **Slide Formats** - Choose 2-line, 4-line, or full-verse per slide
- ğŸ“¥ **OpenLyrics Export** - Download as standard XML format
- ğŸ“± **QR Code Share** - Scan to open song on phone
- ğŸ–¨ï¸ **Print View** - Clean printable lyric sheets
- ğŸŒ“ **Dark Mode** - Light and dark themes

## Tech Stack

- **Framework**: Next.js 16 (App Router)
- **Styling**: Tailwind CSS
- **Database**: Supabase (PostgreSQL)
- **Fonts**: Outfit + Inter

## Getting Started

### 1. Clone the repository

```bash
git clone https://github.com/yourusername/1co18.git
cd 1co18
```

### 2. Install dependencies

```bash
npm install
```

### 3. Set up environment variables

Create a `.env.local` file:

```
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 4. Set up the database

Run this SQL in your Supabase SQL Editor:

```sql
create table songs (
  id bigint generated by default as identity primary key,
  title text not null,
  artist text,
  lyrics text not null,
  language text default 'Twi',
  search_text text,
  is_verified boolean default false,
  created_at timestamp with time zone default now()
);

-- Normalize Twi characters for search
create or replace function normalize_twi(input text)
returns text as $$
begin
  return lower(
    replace(replace(replace(replace(replace(replace(
      input, 'É›', 'e'), 'Æ', 'e'),
      'É”', 'o'), 'Æ†', 'o'),
      'Å‹', 'n'), 'ÅŠ', 'n')
  );
end;
$$ language plpgsql immutable;

create or replace function update_search_text()
returns trigger as $$
begin
  new.search_text := normalize_twi(new.title || ' ' || coalesce(new.artist, '') || ' ' || new.lyrics);
  return new;
end;
$$ language plpgsql;

create trigger songs_search_text_trigger
before insert or update on songs
for each row execute function update_search_text();

alter table songs enable row level security;
create policy "Anyone can read songs" on songs for select using (true);
create policy "Anyone can insert songs" on songs for insert with check (true);
```

### 5. Run the development server

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

## Deploy to Vercel

1. Push your code to GitHub
2. Go to [vercel.com](https://vercel.com) and import your repository
3. Add environment variables:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
4. Deploy!

## Project Structure

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx          # Homepage
â”‚   â”œâ”€â”€ add/page.tsx      # Add song form
â”‚   â”œâ”€â”€ search/page.tsx   # Search results
â”‚   â””â”€â”€ song/[id]/page.tsx # Song detail
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ SearchBar.tsx     # Live search with suggestions
â”‚   â”œâ”€â”€ CopyButton.tsx    # Smart copy with format options
â”‚   â”œâ”€â”€ DownloadButton.tsx # OpenLyrics XML download
â”‚   â”œâ”€â”€ QRShareButton.tsx # QR code modal
â”‚   â””â”€â”€ PrintButton.tsx   # Print-friendly view
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts       # Supabase client
â”‚   â””â”€â”€ songs.ts          # Database operations
â””â”€â”€ utils/
    â””â”€â”€ formatLyrics.ts   # Lyrics formatting utilities
```

## License

MIT
